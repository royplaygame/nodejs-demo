<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新闻项目</title>
    <link href="../public/css/bootstrap.min.css" rel="stylesheet">
    <script src="../public/js/jquery-1.11.1.min.js"></script>
    <script src="../public/js/bootstrap.min.js"></script>
    <script src="../public/js/moment.js"></script>
</head>
<body>
<div class="container">
    <div class="navbar navbar-default">
        <ul class="nav nav-pills">
            <li><a href="index.html">新闻列表</a></li>
            <li><a href="addNews.html">添加新闻</a></li>
        </ul>
    </div>
    <table class="table table-hover table-bordered table-striped">
        <tr>
            <th>新闻编号</th>
            <th>新闻标题</th>
            <th>新闻详情</th>
            <th>发布日期</th>
            <th>操作</th>
        </tr>
        <% for(var i=0; i < list.length; i++) {%>
        <tr>
            <td><%= (i+1)%></td>
            <td><a href="<%= list[i].newsUrl%>" class="poptips"><%= list[i].title%></a></td>
            <td><a href="newsDetail.html?newsId=<%= i %>">查看新闻详情</a></td>
            <td class="date"><%=list[i].pDate %></td>
            <td><a href="del.html?newsId=<%= i %>">删除</a></td>
        </tr>
        <%}%>
    </table>

    <script>
        $(function () {
            Array.from($(".date")).forEach(function (item) {
                const cdate = item.innerHTML === "" ? Date.now() : new Date(item.innerHTML)
                item.innerHTML = moment(cdate).format("YYYY-MM-DD")
            })
        })
    </script>
</div>
</body>
</html>
